/*!
 * stepviz 0.1.0 (22-05-2016)
 * https://github.com/suhaibkhan/stepviz
 * MIT licensed

 * Copyright (C) 2016 Suhaib Khan, http://suhaibkhan.github.io
 */
String.prototype.endsWith||(String.prototype.endsWith=function(a,b){var c=this.toString();("number"!=typeof b||!isFinite(b)||Math.floor(b)!==b||b>c.length)&&(b=c.length),b-=a.length;var d=c.indexOf(a,b);return-1!==d&&d===b}),function(){"use strict";if("undefined"==typeof window.d3)throw"d3 library not found.";var a={};a.components={},a.constants={},a.config={},a.config.cssClass="stepViz",a.config.highlightClass="highlight",a.init=function(b,c){return new a.Board(b,c)},window.stepViz=a}(),function(a,b){"use strict";a.Board=function(c,d){if("string"==typeof c)c=document.getElementById(c);else if(!(c instanceof HTMLElement))throw"Invalid container";this._container=c,this._props=a.util.defaults(d,{margin:{top:10,left:10,bottom:10,right:10}});var e=this._props.margin;this._width=this._container.offsetWidth-e.left-e.right,this._height=this._container.offsetHeight-e.top-e.bottom,this._svg=b.select(this._container).append("svg").attr("width",this._width+e.left+e.right).attr("height",this._height+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")"),this._components=[]},a.Board.prototype.redraw=function(){var a=this._props.margin;this._width=this._container.offsetWidth-a.left-a.right,this._height=this._container.offsetHeight-a.top-a.bottom;var c=b.select(this._svg.node().parentNode);c.attr("width",this._width+a.left+a.right).attr("height",this._height+a.top+a.bottom);for(var d=0;d<this._components.length;d++)this._components[d].redraw()},a.Board.prototype.size=function(){return{width:this._width,height:this._height}},a.Board.prototype.drawArray=function(b,c,d){var e=new a.components.Array(this,b,c,d);return this._components.push(e),e},a.Board.prototype.layout=function(b,c){var d=new a.Layout(this,b,c);return d}}(window.stepViz,window.d3),function(a){"use strict";function b(a,b){var c=parseFloat(a);if(isNaN(c))throw"Invalid layout value "+a;return"string"==typeof a&&(a=a.trim(),a.endsWith("%")&&(c=c/100*b)),c}a.Layout=function(b,c,d){this._board=b,this._box=a.util.defaults(c,{top:0,left:0,width:"auto",height:"auto"}),this._margin=a.util.defaults(d,{top:0,left:0,bottom:0,right:0}),this.reCalculate()},a.Layout.prototype.reCalculate=function(){var a=this._board.size();this._top=b(this._box.top,a.height),this._left=b(this._box.left,a.width),"auto"==this._box.width?this._width=a.width-this._left:this._width=b(this._box.width,a.width),"auto"==this._box.height?this._height=a.height-this._top:this._height=b(this._box.height,a.height)},a.Layout.prototype.getBounds=function(){return{top:this._top,left:this._left,width:this._width,height:this._height}},a.Layout.prototype.getBox=function(){return{top:this._top+this._margin.top,left:this._left+this._margin.left,width:this._width-this._margin.left-this._margin.right,height:this._height-this._margin.top-this._margin.bottom}},a.Layout.prototype.translate=function(a,b){this._top+=b,this._left+=a},a.Layout.prototype.clone=function(){return new a.Layout(this._board,a.util.objClone(this._box),a.util.objClone(this._margin))}}(window.stepViz),function(a){"use strict";a.util={},a.util.defaults=function(a,b){a=a||{};for(var c in b)b.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=b[c]);return a},a.util.objClone=function(b){var c=null;if(Array.isArray(b)){c=[];for(var d=0;d<b.length;d++)c.push(a.util.objClone(b[d]))}else if("object"==typeof b){c={};for(var e in b)b.hasOwnProperty(e)&&(c[e]=a.util.objClone(b[e]))}else c=b;return c}}(window.stepViz),function(a,b){"use strict";function c(b,c,d,e){var f=e.dir,g=e.fontSize,h=e.renderer,i=0,j=0,k=0;k=f==a.constants.ARRAY_VERT_DIR?Math.floor(d.height/c.length):Math.floor(d.width/c.length);for(var l=0;l<c.length;l++){var m=b.append("g").attr("transform","translate("+i+","+j+")"),n=m.append("rect").attr("x",0).attr("y",0);f==a.constants.ARRAY_VERT_DIR?(n.attr("width",d.width).attr("height",k),j+=k):(n.attr("height",d.height).attr("width",k),i+=k);var o=m.append("text").text(h(c[l].value)).attr("x",0).attr("y",0).style("font-size",g),p=n.node().getBBox(),q=o.node().getBBox();o.attr("dx",(p.width-q.width)/2),o.attr("dy",(p.height-q.height)/2),c[l].elem=m}}a.constants.ARRAY_HORZ_DIR="horizontal",a.constants.ARRAY_VERT_DIR="vertical",a.constants.ARRAY_ANIM_SWAP_PATH_AFTER="after",a.constants.ARRAY_ANIM_SWAP_PATH_BEFORE="before",a.constants.ARRAY_ANIM_SWAP_PATH_NONE="none",a.components.Array=function(b,d,e,f){if(this._board=b,!Array.isArray(d))throw"Invalid array";if(0===d.length)throw"Empty array";if(!e)throw"Invalid layout";this._layout=e,this._props=a.util.defaults(f,{dir:a.constants.ARRAY_HORZ_DIR,fontSize:"12px",renderer:function(a){return a}});var g=this._layout.getBox();this._svgElem=this._board._svg.append("g").attr("class",a.config.cssClass+" array").attr("transform","translate("+g.left+","+g.top+")"),this._state=[];for(var h=0;h<d.length;h++)this._state.push({value:d[h]});c(this._svgElem,this._state,g,this._props)},a.components.Array.prototype.redraw=function(){for(var a=0;a<this._state.length;a++)this._state[a].elem=null;this._svgElem.selectAll("*").remove(),this._layout.reCalculate(),c(this._svgElem,this._state,this._layout.getBox(),this._props)},a.components.Array.prototype.getLayout=function(){return this._layout},a.components.Array.prototype.highlight=function(b,c){if("number"==typeof b&&(b=[b]),!Array.isArray(b))throw"Invalid argument to highlight.";c=a.util.defaults(c,{highlightClass:a.config.highlightClass});for(var d=0;d<b.length;d++){var e=b[d];e>-1&&e<this._state.length&&(this._state[e].highlight=!0,this._state[e].elem.attr("class",c.highlightClass))}},a.components.Array.prototype.unhighlight=function(a){if("number"==typeof a&&(a=[a]),!Array.isArray(a))throw"Invalid argument to unhighlight.";for(var b=0;b<a.length;b++){var c=a[b];c>-1&&c<this._state.length&&(this._state[c].highlight=!1,this._state[c].elem.attr("class",null))}},a.components.Array.prototype.move=function(a,c,d){d!==!1&&(d=!0);var e=b.transform(this._svgElem.transition().attr("transform"));e.translate=[e.translate[0]+a,e.translate[1]+c],this._layout.translate(a,c);var f=this._svgElem;d&&(f=f.transition()),f.attr("transform",e)},a.components.Array.prototype.clone=function(){for(var b=[],c=0;c<this._state.length;c++)b.push(this._state[c].value);return this._board.drawArray(b,this._layout.clone(),a.util.objClone(this._props))},a.components.Array.prototype.swap=function(c,d,e,f){if(e!==!1&&(e=!0),f=a.util.defaults(f,{iDir:a.constants.ARRAY_ANIM_SWAP_PATH_NONE,jDir:a.constants.ARRAY_ANIM_SWAP_PATH_AFTER}),c>-1&&d>-1&&c<this._state.length&&d<this._state.length&&c!=d){var g=this._state[c];this._state[c]=this._state[d],this._state[d]=g;var h=b.transform(this._state[d].elem.attr("transform")),i=b.transform(this._state[c].elem.attr("transform")),j=this._state[d].elem.node().getBBox(),k=this._state[c].elem.node().getBBox();this._state[c].elem.transition().duration(1e3).attr("transform","translate("+-(k.width+10)+","+i.translate[1]+")").attr("transform","translate("+-(k.width+10)+","+h.translate[1]+")").attr("transform","translate("+h.translate[0]+","+h.translate[1]+")"),this._state[d].elem.transition().duration(1e3).attr("transform","translate("+(j.width+10)+","+h.translate[1]+")").transition().attr("transform","translate("+(j.width+10)+","+i.translate[1]+")").transition().attr("transform","translate("+i.translate[0]+","+i.translate[1]+")")}}}(window.stepViz,window.d3);